:root{
	--ui-w:360px;
	--gap:16px;
	--bg:#f7f7f7;
	--muted:#6b6b6b;
	--accent:#0b74de;
}

*{box-sizing:border-box;}

html,body{height:100%;}
body{
	margin:0;
	padding-top: var(--header-offset, 80px);
	font-family:"Noto Sans JP",system-ui,Roboto,Arial;
	background:#f5f5f5;
	color:#222;
}

.header-container{
	position: fixed;
	top: 0;
	left: 0;
	right: 0;
	display: flex;
	flex-direction: column;
	align-items: center;
	gap: 8px;
	background: #f5f5f5;
	z-index: 1000;
	padding: 18px 18px 8px;
}

.header-top{
	display:flex;
	align-items:center;
	gap:12px;
	width:100%;
}

h3{
	margin:0 0 12px 0;
	font-size:18px;
	flex:1;
}

.header-action-btn {
	height: 36px;
	padding: 0 12px;
	border-radius: 18px;
	border: 1px solid #ddd;
	background: #f0f0f0;
	color: #222;
	font-size: 12px;
	cursor: pointer;
	transition: all 0.2s ease;
	white-space: nowrap;
	flex-shrink:0;
}

.header-action-btn:hover {
	background: #e8e8e8;
	transform: translateY(-1px);
	box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.home-btn{
	display:inline-flex;
	align-items:center;
	justify-content:center;
	width:40px;
	height:40px;
	border-radius:50%;
	background:#f0f0f0;
	border:1px solid #ddd;
	text-decoration:none;
	transition:all 0.2s ease;
	box-shadow:0 2px 4px rgba(0,0,0,0.05);
}

.home-btn:hover{
	background:#e8e8e8;
	transform:translateY(-1px);
	box-shadow:0 4px 8px rgba(0,0,0,0.1);
}

.home-icon{font-size:20px;line-height:1;}

h3{margin:0 0 12px 0;font-size:18px;}

.container{
	display:flex;
	gap:var(--gap);
	align-items:flex-start;
	min-height:calc(100vh - 36px);
	padding:0 18px 18px;
}

.main-content{
	flex:1;
	display:flex;
	flex-direction:column;
	gap:16px;
}

.previewWrap{
	flex:1;
	display:flex;
	align-items:center;
	justify-content:center;
}

.previewViewport{
	width:100%;
	max-width:900px;
	aspect-ratio:16 / 9;
	background:#fff;
	border-radius:12px;
	box-shadow:0 6px 18px rgba(0,0,0,0.06);
	overflow:hidden;
	position:relative;
	display:flex;
	align-items:center;
	justify-content:center;
}

.previewViewport.dragover .dropArea{
	border-color:var(--accent);
	background:rgba(238,246,255,0.9);
}

.previewViewport.has-image .dropArea{
	opacity:0;
	pointer-events:none;
}

#previewCanvas{
	width:100%;
	height:100%;
	display:none;
	background:transparent;
}

.dropArea{
	position:absolute;
	inset:0;
	border:2px dashed #e0e0e0;
	border-radius:10px;
	display:flex;
	flex-direction:column;
	align-items:center;
	justify-content:center;
	color:#666;
	cursor:pointer;
	background:rgba(255,255,255,0.82);
	gap:6px;
	text-align:center;
	padding:12px;
}

.dropTitle{
	font-size:15px;
	font-weight:600;
}

.noImage{
	position:absolute;
	inset:0;
	display:flex;
	align-items:center;
	justify-content:center;
	color:#666;
	font-size:14px;
	pointer-events:none;
}


.sidebar{
	width:var(--ui-w);
	background:var(--bg);
	border-radius:12px;
	padding:14px;
	box-sizing:border-box;
	border:1px solid #e9e9e9;
	height:calc(100vh - 36px);
	overflow:auto;
	position: sticky;
	top: 18px;
}

.panel{
	background:#fff;
	border-radius:10px;
	padding:12px;
	margin-bottom:12px;
	border:2px solid #eee;
}

.panel > strong{
	display:block;
	padding-bottom:6px;
	margin-bottom:8px;
	border-bottom:1px solid #e3e3e3;
}

.sectionTitle{
	font-weight:600;
	font-size:14px;
	color:#333;
	margin:8px 4px 6px;
}

.fileSlot{
	border:2px dashed #e0e0e0;
	border-radius:8px;
	padding:10px;
	text-align:center;
	cursor:pointer;
	background:linear-gradient(#fff,#fbfbfb);
	width:100%;
}

.fileSlot.dragover{
	border-color:var(--accent);
	background:#eef6ff;
}

.layerHeader{
	display:flex;
	align-items:center;
	justify-content:space-between;
	margin:8px 0 6px;
	gap:8px;
}

.layerList{
	display:flex;
	flex-direction:column;
	gap:8px;
	max-height:300px;
	overflow-y:auto;
	padding-right:4px;
}

.layerList::-webkit-scrollbar{
	width:6px;
}

.layerList::-webkit-scrollbar-track{
	background:#f1f1f1;
	border-radius:3px;
}

.layerList::-webkit-scrollbar-thumb{
	background:#d0d0d0;
	border-radius:3px;
}

.layerList::-webkit-scrollbar-thumb:hover{
	background:#999;
}

.layerItem{
	display:flex;
	align-items:center;
	gap:10px;
	padding:6px;
	border-radius:10px;
	border:1px solid #e6e6e6;
	background:#fafafa;
	cursor:grab;
	flex-shrink:0;
}

.layerItem.dragging{
	opacity:0.6;
	cursor:grabbing;
}

.layerHandle{
	font-size:12px;
	color:#888;
	padding:2px 4px;
	border-radius:6px;
	background:#f0f0f0;
	border:1px solid #e0e0e0;
	flex-shrink:0;
}

.layerTitle{
	font-size:12px;
	flex:1;
	overflow:hidden;
	text-overflow:ellipsis;
	white-space:nowrap;
	min-width:0;
}

.layerType{
	font-size:11px;
	color:#666;
	padding:1px 5px;
	border-radius:999px;
	background:#ededed;
	flex-shrink:0;
}

.layerRemove{
	background:#ef6b6b;
	color:#fff;
	border:none;
	padding:4px 6px;
	border-radius:8px;
	cursor:pointer;
	font-size:11px;
	flex-shrink:0;
}

#gifLimit{
	margin-top:8px;
}

.slotInfo{
	display:flex;
	gap:10px;
	align-items:center;
	margin-top:8px;
}

.thumb{
	width:40px;
	height:40px;
	object-fit:cover;
	border-radius:6px;
	border:1px solid #e6e6e6;
	background:#fafafa;
	flex-shrink:0;
}

.fileMeta{
	font-size:13px;
	overflow:hidden;
	text-overflow:ellipsis;
	white-space:nowrap;
	flex:1;
}

.removeBtn{
	background:#ef6b6b;
	color:#fff;
	border:none;
	padding:6px 8px;
	border-radius:8px;
	cursor:pointer;
}

.label{font-weight:600;margin-bottom:6px;display:block;}

.row{
	display:flex;
	gap:8px;
	align-items:center;
	flex-wrap:wrap;
}

.sizeRow input[type="number"]{
	flex:1;
	min-width:0;
}

.centerRow{
	justify-content:center;
	width:100%;
}

.effectRow select{
	flex:1;
	min-width:0;
}

.effectRow .btn{
	white-space:nowrap;
}

.small{font-size:13px;color:#444;}
.info{font-size:13px;color:#666;}

.val{
	min-width:48px;
	text-align:right;
	font-size:13px;
	color:#333;
}

.controlRow{
	display:flex;
	gap:8px;
	align-items:flex-start;
	margin-bottom:8px;
	flex-direction:column;
}

#gifOptions .row + .row{
	margin-top:15px;
}

input[type="number"],select{
	padding:8px;
	border-radius:8px;
	border:1px solid #e6e6e6;
	width:100%;
	box-sizing:border-box;
}

input[type="range"]{
	width:auto;
	flex:1;
	min-width:0;
}

button{
	background:#d0d0d0;
	color:#222;
	border-radius:8px;
	padding:8px 10px;
	border:1px solid rgba(0,0,0,0.06);
	cursor:pointer;
}

.btnPrimary{
	background:var(--accent);
	color:#fff;
	border-color:var(--accent);
}

#clearBtn,
#removeEffectBtn,
.layerRemove{
	background:#ef6b6b;
	color:#fff;
	border-color:#ef6b6b;
}

#clearBtn:hover:not(:disabled),
#removeEffectBtn:hover:not(:disabled),
.layerRemove:hover:not(:disabled){
	filter:brightness(1.1);
}

#addEffectAssetBtn{
	background:#F0AD4E;
	color:#fff;
	border-color:#F0AD4E;
}

#addEffectAssetBtn:hover:not(:disabled){
	filter:brightness(1.1);
}

#site-footer{
	margin-top:24px;
	padding:16px;
	text-align:center;
	color:#666;
	border-top:1px solid rgba(0,0,0,0.06);
	background:#fff;
	display:flex;
	flex-direction:column;
	gap:6px;
}

#site-footer a{ color:inherit; text-decoration:none; }
#site-footer a:hover{ text-decoration:underline; }

.footer-note{font-size:12px;color:#666;}

@media (max-width: 980px){
	.container{
		flex-direction:column;
		padding:0 12px 18px;
	}
	.sidebar{
		width:100%;
		position:static;
		height:auto;
	}
}

